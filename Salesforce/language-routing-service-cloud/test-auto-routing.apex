// Test automatic routing by creating new cases
System.debug('ğŸ§ª Testing AUTOMATIC case routing...');

// Create test cases - they should be auto-routed by the trigger!
List<Case> newTestCases = new List<Case>{
    new Case(
        Subject = 'Auto Test - Dutch Issue',
        Description = 'Ik heb een probleem met mijn nieuwe bestelling en weet niet wat ik moet doen.',
        Origin = 'Web'
    ),
    new Case(
        Subject = 'Auto Test - German Problem', 
        Description = 'Ich brauche sofortige Hilfe mit meinem defekten Produkt. Es funktioniert Ã¼berhaupt nicht.',
        Origin = 'Email'
    ),
    new Case(
        Subject = 'Auto Test - English Request',
        Description = 'I need immediate assistance with my account settings and billing information.',
        Origin = 'Phone'
    )
};

// Insert cases - trigger should automatically route them!
insert newTestCases;

System.debug('âœ… Created ' + newTestCases.size() + ' test cases');

// Wait a moment then check the results
System.debug('ğŸ” Checking auto-routing results...');

List<Case> routedCases = [
    SELECT Id, Subject, OwnerId, Comments, Owner.Name 
    FROM Case 
    WHERE Id IN :newTestCases 
];

for (Case c : routedCases) {
    System.debug('ğŸ“‹ Case: ' + c.Subject);
    System.debug('  Owner: ' + c.OwnerId + ' (' + c.Owner.Name + ')');
    System.debug('  Comments: ' + c.Comments);
    System.debug('  ---');
}

// Get routing statistics
Map<String, Object> stats = CaseAutoRoutingHandler.getRoutingStats();
System.debug('ğŸ“Š Routing Stats: ' + stats);

System.debug('ğŸ‰ AUTOMATIC ROUTING TEST COMPLETE!');
